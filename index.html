<html>
	<head>
		<script src="js/mail-generator.js"></script>
		<link href="css/style.css" rel="stylesheet" media="screen">
	



<style>
p {
  text-align: justify;
  font-size: 50px;
}   
</style>
<title class="header">Zubin's Application</title>
   <div class="header">Zubin's Gee-mail Challenge</div>

    <script>
      window.onload = function(){

   mail = window.geemails;
       
    mailFormat = document.getElementById("mailFormat");
 


        setInterval(function(){ 
         message = getNewMessage();
         mail.push(message);
         tf = document.createElement("tf");
	        td_sender = document.createElement("td");
	        td_date = document.createElement("td");
	        td_subject = document.createElement("td");
	        td_body = document.createElement("td");

       	td_sender.appendChild(document.createTextNode(message.sender));
		td_subject.appendChild(document.createTextNode(message.subject));
		td_subject.setAttribute("class","subject");
       	td_date.appendChild(document.createTextNode(message.date));
       		td_body.appendChild(document.createTextNode(message.body));
       			td_body.setAttribute("class","mailcontent"); 
td_date.setAttribute("class","Date");
td_sender.setAttribute("class","emailSender"); 
	tf.appendChild(td_sender);
       		tf.appendChild(td_subject);
       		tf.appendChild(td_date);
       		tf.appendChild(td_body);
       		tf.addEventListener("click",displaymailcontents);
   mailFormat.insertBefore(tf,mailFormat.childNodes[0]);
td_mailcount = document.getElementById("mailcount");
td_mailcount.textContent = "Total Mails: "  + mailFormat.children.length;
 }, 4000);
function displayMailData(){
			for(i=0; i<window.mail.length; i++){
       		
	       	tf = document.createElement("tf");
	        td_sender = document.createElement("td");
	        td_date = document.createElement("td");
	        td_subject = document.createElement("td");
	        td_body = document.createElement("td");	
       		
td_sender.appendChild(document.createTextNode(window.mail[i].sender));
td_sender.setAttribute("class","emailSender"); 
td_subject.appendChild(document.createTextNode(window.mail[i].subject));
td_subject.setAttribute("class","subject");
td_date.appendChild(document.createTextNode(window.mail[i].date));
td_date.setAttribute("class","Date");
td_body.appendChild(document.createTextNode(window.mail[i].body));
td_body.setAttribute("class","mailcontent");

tf.appendChild(td_sender);
tf.appendChild(td_subject);
tf.appendChild(td_date);
tf.appendChild(td_body);
tf.addEventListener("click",displaymailcontents);
mailFormat.appendChild(tf);
	}	
}
		displayMailData();
td_mailcount = document.getElementById("mailcount");
td_mailcount.textContent ="Total Mails: "  + window.mail.length;

function displaymailcontents(event){
	console.log(this.children[3].innerText);
	mailSender = document.getElementById("mailSender");
	mailDate = document.getElementById("mailDate");
	mailSubject = document.getElementById("mailSubject");
	mailBody = document.getElementById("mailBody");
	mailSender.textContent = this.children[0].innerText;
	mailDate.textContent = this.children[2].innerText;
	mailSubject.textContent = this.children[1].innerText;
	mailBody.textContent = this.children[3].innerText;
	magic.style.display = "block";
}

var magic = document.getElementById('mm');

var span = document.getElementsByClassName("close")[0];

span.onclick = function() {
    magic.style.display = "none";
}


window.onclick = function(event) {
    if (event.target == magic) {
        magic.style.display = "none";
    }

       
   }  
  }    </script>
	</head>
	
	<body>
  <p id="info" class=""><span id="counter"></span></p>
		<nav class="bar">Zee
		<span id="mailcount"></span></nav>
	</table>



		<div class="container" id="main">
 <table id="mailFormat">
 	<div id="topBar">From:</div>
 	<div id="topBar">Subject:</div>
 	<div id="topBar">Date:</div>
 </table>



<div id="mm" class="magic">


  <div class="magic-content">
    <div class="magic-header">
      <span class="close"></span>
      <h2 id="mailSubject"></h2>
    </div>
    <div class="magic-body">
    <div id="mailDate"></div>
    <div id="mailSender"></div>
		<div id="mailBody"></div>
   </div>
  </div>
</div>
			
 		</div>
 		
		 <div class="bottom">
			<footer></footer>
		 </div>
		

	</body>

	 
</html>












		